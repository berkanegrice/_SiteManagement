@using Microsoft.AspNetCore.Mvc.TagHelpers
@using SiteManagement.Infrastructure.Persistence.Constants
@using Microsoft.AspNetCore.Authorization
@model SiteManagement.MVC.Models.DueInformationVm
@inject IAuthorizationService AuthorizationService


@if ((AuthorizationService.AuthorizeAsync(User, Permissions.LeaseHolder.Create)).Result.Succeeded)
{
    <hr/>
        <h4>Yeni Aidat Listesi Ekle</h4>
        await Html.RenderPartialAsync("UploadDueList");
    <hr/>
}

@if (TempData["Message"] != null)
{
    <div class="alert alert-success alert-dismissible" style="margin-top:20px">
        @TempData["Message"]
        <span style="display:flex; justify-content:flex-end; width:100%; padding:0;">
            <a type="button" class="btn btn-primary" 
               asp-controller="Due" 
               asp-action="ApplyDueList" 
               asp-route-dueListId="@TempData["DueListId"]"
               asp-route-dueListType="@TempData["DueListType"]">Uygula</a>
        </span>
    </div>
}

<link href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
<div class="container">
    <br />
    <div style="width:90%; margin:0 auto;">
        <table id="DueInformationDatatable" class="table table-striped table-bordered dt-responsive nowrap">
            <thead>
            <tr>
                <th>ID</th>
                <th>Hesap Kodu</th>
                <th>Hesap Adi</th>
                <th>Borc</th>
                <th>Alacak</th>
                <th>Bakiye Borc</th>
                <th>Bakiye Alacak</th>
                <th>Odeme Hareketleri</th>
            </tr>
            </thead>
        </table>
    </div>
</div>
@section Scripts
{
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.11.5/dataRender/datetime.js"></script>
    <script src="~/js/DueInformation.js"></script>
    <script src="~/js/DueTransaction.js"></script>
}